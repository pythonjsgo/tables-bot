import { MenuMiddleware, MenuTemplate } from 'grammy-inline-menu';
import db from '../db-manager.js';
import { parseMenuQueryData } from '../logic.js';
const ROOT_TRIGGER = '/';
let tables = {};
const menu = new MenuTemplate(async (ctx) => {
    const userID = ctx.from.id;
    const userData = await db.users.findOne({ userID });
    tables = userData.tables;
    const tablesCount = 0;
    return {
        text: `<b>Мои столы</b> (${tablesCount})`,
        parse_mode: 'HTML'
    };
});
const tableSubmenu = new MenuTemplate(async (ctx) => {
    console.log('new submenu call', parseMenuQueryData(ctx.callbackQuery.data));
    return {
        text: 'Submenu',
        parse_mode: 'HTML'
    };
});
// @ts-ignore
menu.chooseIntoSubmenu('look-table', tables, tableSubmenu);
export const middleware = new MenuMiddleware(ROOT_TRIGGER, menu);
export default middleware;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21lbnVlcy90YWJsZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQUNqRSxPQUFPLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUNqQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxhQUFhLENBQUE7QUFFaEQsTUFBTSxZQUFZLEdBQVcsR0FBRyxDQUFBO0FBRWhDLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQTtBQUNmLE1BQU0sSUFBSSxHQUFHLElBQUksWUFBWSxDQUN6QixLQUFLLEVBQUMsR0FBRyxFQUFDLEVBQUU7SUFDUixNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQTtJQUMxQixNQUFNLFFBQVEsR0FBRyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQTtJQUNuRCxNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQTtJQUN4QixNQUFNLFdBQVcsR0FBRyxDQUFDLENBQUE7SUFDckIsT0FBTztRQUNILElBQUksRUFBRSxxQkFBcUIsV0FBVyxHQUFHO1FBQ3pDLFVBQVUsRUFBRSxNQUFNO0tBQ3JCLENBQUE7QUFDTCxDQUFDLENBQ0osQ0FBQTtBQUNELE1BQU0sWUFBWSxHQUFHLElBQUksWUFBWSxDQUNqQyxLQUFLLEVBQUMsR0FBRyxFQUFDLEVBQUU7SUFDUixPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFFLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtJQUUzRSxPQUFPO1FBQ0gsSUFBSSxFQUFFLFNBQVM7UUFDZixVQUFVLEVBQUUsTUFBTTtLQUNyQixDQUFBO0FBQ0wsQ0FBQyxDQUNKLENBQUE7QUFDRCxhQUFhO0FBQ2IsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFlBQVksRUFBRSxNQUFNLEVBQUUsWUFBWSxDQUFDLENBQUE7QUFFMUQsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLElBQUksY0FBYyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUNoRSxlQUFlLFVBQVUsQ0FBQSJ9